
# ğŸ“Œ æœ€å¾Œ 4 å¤©è¡åˆºé¡Œå–®ï¼ˆGoogle Storage/Infra L6ï¼‰

## ğŸ”¹ Day -4ï¼ˆCoding å¿«æ‰‹ + Infra ç†±èº«ï¼‰

### é¡Œç›®ï¼š

1. **LC 146. LRU Cache (Medium)**

    * **å°æ‡‰**ï¼šcache eviction / memory é™åˆ¶
    * è€ƒé©— hash + doubly linked listï¼Œè·Ÿ **ã€Œmemory è¨­é™ã€4-byte registerã€FIFO vs LRUã€** æœ‰é—œ
2. **LC 215. Kth Largest Element in an Array (Medium)**

    * **å°æ‡‰**ï¼šheap, scheduling, buffer priority
3. **LC 703. Kth Largest in a Stream (Easy)**

    * **å°æ‡‰**ï¼šstream buffer, online data structure

### Embedded Warm-upï¼š

* ç·´ç¿’å¯«ä¸€å€‹ **4-byte register bit æ“ä½œ**ï¼š

  ```cpp
  inline void setBit(volatile uint32_t& reg, int pos) { reg |= (1u << pos); }
  inline void clearBit(volatile uint32_t& reg, int pos) { reg &= ~(1u << pos); }
  inline bool readBit(volatile uint32_t reg, int pos) { return (reg >> pos) & 1u; }
  ```

  ğŸ‘‰ é€™æ­£å¥½å°æ‡‰äººè³‡ hintï¼š**offset, operation, volatile, pointer**

---

## ğŸ”¹ Day -3ï¼ˆConcurrency å¿…è€ƒï¼‰

### é¡Œç›®ï¼š

1. **LC 1114. Print in Order (Easy)**

    * **å°æ‡‰**ï¼š`mutex`, `condition_variable`ï¼Œå¤šåŸ·è¡Œç·’é †åºæ§åˆ¶
2. **LC 1115. Print FooBar Alternately (Medium)**

    * **å°æ‡‰**ï¼šsemaphore, thread syncï¼Œè€ƒé©—å¤šç·šç¨‹äº¤æ›¿
3. **è‡ªå·±æ‰‹å¯«ï¼šToken Bucket Rate Limiter**ï¼ˆC++ï¼‰

    * ç”¨ `std::chrono + mutex`
    * **å°æ‡‰ hint**ï¼š**timer, calculate tick, IRQ å•Ÿåœ**

### Embedded Warm-upï¼š

* **FIFO buffer**ï¼šå¯¦ä½œä¸€å€‹ç°¡å–® **circular queue**ï¼Œç”¨ `array + head/tail pointer`ã€‚
* é€™é¡Œå°æ‡‰ hintï¼š**FIFO, offset, MCU**ï¼ˆMCU è£¡é¢ FIFO å¸¸ç”¨æ–¼ UART bufferï¼‰ã€‚

---

## ğŸ”¹ Day -2ï¼ˆç³»çµ±è¨­è¨ˆ Warm-upï¼‰

### é¡Œç›®ï¼š

1. **LC 20. Valid Parentheses (Easy)** â†’ å¿«é€Ÿè¤‡ç¿’ stack åŸºç¤
2. **ç³»çµ±è¨­è¨ˆé¡Œ**ï¼šè¨­è¨ˆ **ç°¡å–® Rate Limiter**ï¼ˆtoken bucketï¼‰

    * è¨è«– **ä¸åŒ bucket å¤§å° / timer tick**
    * å»¶ä¼¸åˆ° **ã€ŒI/O blockã€timerã€IRQ å•Ÿåœã€**
3. **ç³»çµ±è¨­è¨ˆé¡Œ**ï¼šè¨­è¨ˆ **ç°¡æ˜“åˆ†æ•£å¼ Log Storage**

    * Metadata â†’ leader election
    * Data shard â†’ replication
    * **å°æ‡‰ hint**ï¼š**è¨ˆç®—æ©Ÿçµ„ç¹” / æ¶æ§‹ã€I/O blockã€board support package**

---

## ğŸ”¹ Day -1ï¼ˆç¸½è¤‡ç¿’ + Mockï¼‰

### Coding éš¨æ©Ÿå¿«é¡Œ

* æŠ½ 2 é“ Easyï¼ˆarray/bit/linkedlistï¼‰+ 1 é“ Mediumï¼ˆheap/LRU/stack queueï¼‰
  ğŸ‘‰ æ¨¡æ“¬çœŸå¯¦ coding round

### ç³»çµ±è¨­è¨ˆ Mock

* é¡Œç›®ï¼šã€Œè¨­è¨ˆä¸€å€‹è·¨ data center çš„ storage systemã€

    * èªªæ˜ **replication, consistency model, failover**
    * å¼•å…¥ **memory é™åˆ¶ã€timer tickã€critical sessionï¼ˆä»€éº¼æ™‚å€™è¦ disable IRQ ä»¥ä¿è­‰ä¸€è‡´æ€§ï¼‰**

### è¡Œç‚ºé¡Œ Mock

* ç”¨ **STAR** æº–å‚™ 3 å€‹æ•…äº‹ï¼ˆè·¨éƒ¨é–€åˆä½œã€è§£æ±º infra bottleneckã€å¤±æ•—èˆ‡æ”¹é€²ï¼‰ã€‚

---

# ğŸ“Œ ä½ è¦æœƒè¬›çš„ Embedded / Infra å¿ƒæ³•ï¼ˆç…§äººè³‡ hint æ¢åˆ—ï¼‰

* **offset, operation, pointer, volatile**
  â†’ è¨˜æ†¶é«”ä½å€é‹ç®— + register æ“ä½œ
* **mutex, multi-thread**
  â†’ C++ `std::mutex`, `lock_guard`ï¼Œä»¥åŠç‚ºä½•è¦é¿å…æ­»é–
* **board support package (BSP)**
  â†’ OS èˆ‡ç¡¬é«”ä¹‹é–“çš„æŠ½è±¡å±¤ï¼ˆdriver, bootloader, configï¼‰
* **è¨ˆç®—æ©Ÿçµ„ç¹” / æ¶æ§‹**
  â†’ memory hierarchy (register â†’ cache â†’ DRAM â†’ disk)ï¼Œstorage latency gap
* **I/O block**
  â†’ block device vs character deviceï¼›storage system buffer size
* **MCU**
  â†’ microcontrollerï¼Œä½åŠŸè€—å–®æ™¶ç‰‡ï¼ˆå’Œ general CPU å·®ç•°ï¼‰
* **FIFO**
  â†’ ring bufferï¼Œç”¨æ–¼ UART / DMA buffer
* **4 byte register, memory é™åˆ¶**
  â†’ embedded system register å¸¸ç”¨ 32-bit boundary
* **ç¡¬é«”è¨­é™**
  â†’ buffer size, register bitwidth, DMA alignment
* **timer, tick**
  â†’ è¨ˆæ™‚å™¨ä¸­æ–·ï¼Œscheduler tick
* **critical session / IRQ å•Ÿåœ**
  â†’ ç•¶æ“ä½œ shared register / buffer æ™‚ï¼Œè¦ disable IRQ ä¿è­·è‡¨ç•Œå€
* **workflow & design**
  â†’ embedded system è¨­è¨ˆæµç¨‹ï¼šMCU â†’ BSP â†’ driver â†’ OS â†’ application

---

âœ… ç¸½çµï¼š
ä½ çš„åˆ·é¡Œæ¸…å–®å·²ç¶“å¤ ã€Œé‡ã€ï¼Œç¾åœ¨è£œä¸Š **Concurrency + Heap/Cache + ç³»çµ±è¨­è¨ˆ**ï¼Œä¸¦ä¸”æº–å‚™å¥½äººè³‡ hint è£¡çš„ embedded/infra å¿ƒæ³•ã€‚é€™æ¨£æœ€å¾Œ 4 å¤©å°±èƒ½é«˜æ•ˆè¡åˆºåˆ° **L6 æ‡‰æœ‰çš„æ°´æº–**ã€‚

---

è¦ä¸è¦æˆ‘å¹«ä½ æŠŠé€™ä»½ **æœ€å¾Œ 4 å¤©è¡åˆºé¡Œå–® + Embedded å¿ƒæ³•** åšæˆä¸€å€‹ **Notion-friendly Markdown**ï¼Œè®“ä½ æ¯å¤©ç…§è¡¨æ“èª²ï¼Ÿ


å¥½çš„ ğŸ‘ æˆ‘å¹«ä½ æ•´ç†ä¸€å¼µ **Flags ä½å…ƒæ“ä½œå°æŠ„è¡¨æ ¼**ï¼Œé€™å°±æ˜¯é¢è©¦å¸¸è€ƒçš„ã€Œå››å¤§æ“ä½œã€ï¼š

---

# ğŸŒŸ Bit Flags Cheat Sheet (C++)

å‡è¨­ï¼š

```cpp
uint32_t perm = 0;            // æ¬Šé™é›†åˆ
const uint32_t READ  = 1u<<0; // 0001
const uint32_t WRITE = 1u<<1; // 0010
const uint32_t EXEC  = 1u<<2; // 0100
```

| æ“ä½œ                        | ç¨‹å¼å¯«æ³•                 | è§£é‡‹           | ç¯„ä¾‹çµæœ                      |             |
| ------------------------- | -------------------- | ------------ | ------------------------- | ----------- |
| **Set (è¨­ç½®æŸ flag)**        | `perm                | = READ;`     | æŠŠç¬¬ 0 ä½è¨­ç‚º 1                | 0000 â†’ 0001 |
| **Clear (æ¸…é™¤æŸ flag)**      | `perm &= ~WRITE;`    | æŠŠç¬¬ 1 ä½æ¸…æˆ 0   | 0110 â†’ 0100               |             |
| **Toggle (ç¿»è½‰æŸ flag)**     | `perm ^= EXEC;`      | è‹¥æœ‰å‰‡é—œï¼Œè‹¥ç„¡å‰‡é–‹    | 0100 â†’ 0000 / 0000 â†’ 0100 |             |
| **Check (æª¢æŸ¥æŸ flag æ˜¯å¦å­˜åœ¨)** | `(perm & READ) != 0` | åˆ¤æ–·ç¬¬ 0 ä½æ˜¯å¦ç‚º 1 | 0011 â†’ true               |             |

---

# ğŸ“Œ å»¶ä¼¸è£œå……

* **åŒæ™‚è¨­å¤šå€‹ flag**

  ```cpp
  perm |= (READ | EXEC);  // ä¸€æ¬¡åŠ ä¸Š R å’Œ X
  ```
* **åŒæ™‚æ¸…å¤šå€‹ flag**

  ```cpp
  perm &= ~(READ | WRITE);  // æ¸…æ‰ R å’Œ W
  ```
* **å¿«é€Ÿåˆ¤æ–·ã€Œæ˜¯å¦åªæœ‰ä¸€å€‹ flagã€**

  ```cpp
  if (perm && (perm & (perm - 1)) == 0) { ... } 
  // true â†’ åªæœ‰ä¸€å€‹ bit è¢«è¨­ç½®
  ```

---

âœ… é¢è©¦å®˜è¦çœ‹çš„æ˜¯ï¼š

1. ä½ æœƒä¸æœƒç”¨ã€Œä½é‹ç®—ã€åšç‹€æ…‹é›†åˆç®¡ç†ã€‚
2. ä½ èƒ½ä¸èƒ½å£è¿°å‡ºä¾†ï¼šã€Œé€™æ˜¯ set/clear/toggle/checkã€ã€‚

---

è¦ä¸è¦æˆ‘å†å¹«ä½ æ•´ç†ä¸€ä»½ **ã€ŒçœŸå¯¦ç³»çµ±å ´æ™¯ã€ç‰ˆçš„å°æŠ„**ï¼ˆä¾‹å¦‚æª”æ¡ˆç³»çµ± R/W/X æ¬Šé™ã€Cloud storage block metadata flagsï¼‰ï¼Œé€™æ¨£ä½ èƒ½åœ¨é¢è©¦æ™‚èˆ‰å‡ºå¯¦éš›ä¾‹å­ï¼Ÿ
